(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const h of i.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&c(h)}).observe(document,{childList:!0,subtree:!0});function a(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function c(t){if(t.ep)return;t.ep=!0;const i=a(t);fetch(t.href,i)}})();const w=document.querySelector(":root"),g=new URLSearchParams(location.search);var p;const m=(p=g.get("sizes"))==null?void 0:p.split(",").map(Number),l=Number(g.get("step"))||3,X=g.get("bg")??"000";w.style.setProperty("--bg",`#${X}`);const s=document.querySelector("#app"),n=document.createElement("canvas"),o=n.getContext("2d"),e={hue:0,stepX:l,stepY:l,directionX:"left",directionY:"down",height:s.clientHeight,width:s.clientWidth,image:new Image,imageX:0,imageY:0};e.height=s.clientHeight;e.width=s.clientWidth;n.height=e.height;n.width=e.width;s.appendChild(n);function f(){o.globalCompositeOperation="source-over",o.fillRect(0,0,e.width,e.height),o.globalCompositeOperation="source-over",o.fillStyle=`hsla(${e.hue}, 50%, 45%, 1)`,o.fillRect(0,0,e.width,e.height),o.globalCompositeOperation="destination-in",o.drawImage(e.image,e.imageX,e.imageY,e.image.width,e.image.height),Y(),y(),requestAnimationFrame(()=>f())}function Y(){e.directionX=="left"?e.imageX>=e.width-e.image.width?(e.directionX="right",e.imageX=e.imageX-e.stepX):e.imageX=e.imageX+e.stepX:e.imageX<=0?(e.directionX="left",e.imageX=e.imageX+e.stepX):e.imageX=e.imageX-e.stepX,e.directionY=="down"?e.imageY>=e.height-e.image.height?(e.directionY="up",e.imageY=e.imageY-e.stepY):e.imageY=e.imageY+e.stepY:e.imageY<=0?(e.directionY="down",e.imageY=e.imageY+e.stepY):e.imageY=e.imageY-e.stepY}function y(){e.hue=(e.hue+.5)%360}function u(){e.width=n.width=window.innerWidth,e.height=n.height=window.innerHeight}async function b(){new Promise((d,r)=>{if(e.image.src=g.get("image")||"./dvd.png",m){const[a,c]=m;e.image.height=a,e.image.width=c}e.image.onload=()=>{e.imageX=Math.floor(Math.random()*(e.width-e.image.width)),e.imageY=Math.floor(Math.random()*(e.height-e.image.height)),d()},e.image.onerror=a=>{r(a)}})}b().then(()=>{window.addEventListener("resize",()=>u()),u(),f()}).catch(console.log);
